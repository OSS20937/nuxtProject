import{_ as R}from"./AppTextField.vue.bf697606.js";import{a as D}from"./index.0806343c.js";import{a as F,k as S,r,o as I,b as O,m as U,e as a,w as s,g as h,f as n,s as g,i as V,j as _,F as B,v}from"./entry.78a4d2b5.js";import{u as L}from"./emp.01c69dea.js";import{b as M,a as j}from"./VCard.74fedfca.js";import{V as H}from"./VRow.54119276.js";import{V as z}from"./VCol.369eaaa8.js";import{V as W}from"./VDivider.0d3ed842.js";import{V as $}from"./VDataTable.98bf3bb2.js";import{V as P}from"./VAlert.659862cf.js";import{V as w}from"./VSnackbar.01af3bad.js";import"./VCheckboxBtn.de217159.js";import"./forwardRefs.6ea3df5c.js";import"./createSimpleFunctional.7c9d16ea.js";import"./VAvatar.c7ed456b.js";/* empty css              */import"./VSelect.dc01c53d.js";import"./VMenu.b24af2d4.js";const q=h("h1",{class:"mb-6"},"인사발령 관리",-1),G={style:{"inline-size":"10rem"}},de=F({__name:"manage",setup(J){S();const y=L();y.loadEmpCode(),console.log("현재 로그인된 직원 코드:",y.empCode);const p=r(!1),m=r(!1),c=D(),k=r(),l=r([]),A=[{title:"발령번호",key:"appointNo"},{title:"사번",key:"empCode"},{title:"직원명",key:"empName"},{title:"부서",key:"deptName"},{title:"발령부서",key:"appointDept"},{title:"직급",key:"positionName"},{title:"발령직급",key:"appointLevel"},{title:"승급호봉",key:"appointHobong"},{title:"근무지",key:"workPlaceName"},{title:"발령근무지",key:"appointWP"}],u=r([]),d=r(""),N=r(5),T=r(1),E={enabled:!0,setCurrentPage:2},f=async()=>{try{console.log("여기요"),await c.FETCH_APPOINT_LIST(),u.value=c.all_appointments_list}catch(i){console.error("Failed to fetch appointments list",i)}},C=async()=>{if(l.value.length===0)p.value=!0;else{for(const i of l.value){const e=u.value.filter(t=>t.appointNo===i);if(e.length>0){const t=e.map(o=>v(o));t[0].status="승인",console.log("발령 승인",t[0]),await c.UPDATE_APPOINT_APPROVE_EMP(t[0])}}m.value=!0,await f()}},x=async()=>{if(l.value.length===0)p.value=!0;else{for(const i of l.value){const e=u.value.filter(t=>t.appointNo===i);if(e.length>0){const t=e.map(o=>v(o));t[0].status="반려",console.log("발령 반려",t[0]),await c.UPDATE_APPOINT_APPROVE_EMP(t[0])}}m.value=!0,await f()}},b=async()=>{if(l.value.length===0)p.value=!0;else{for(const i of l.value){const e=u.value.filter(t=>t.appointNo===i);if(e.length>0){const t=e.map(o=>v(o));await c.DELETE_APPOINT_EMP(t[0].appointNo)}}m.value=!0,await f()}};return I(f),(i,e)=>{const t=R;return O(),U(B,null,[q,a(j,{class:"mt-3"},{default:s(()=>[a(M,{class:"d-flex flex-wrap py-4 gap-4"},{default:s(()=>[h("div",G,[a(t,{modelValue:n(d),"onUpdate:modelValue":e[0]||(e[0]=o=>g(d)?d.value=o:null),density:"compact",placeholder:"Search","append-inner-icon":"tabler-search","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),a(H,{class:"text-right"},{default:s(()=>[a(z,null,{default:s(()=>[a(V,{class:"ma-2",color:"primary",onClick:C},{default:s(()=>[_(" 승인 ")]),_:1}),a(V,{class:"ma-2",color:"secondary",onClick:x},{default:s(()=>[_(" 반려 ")]),_:1}),a(V,{class:"ma-2",color:"error",onClick:b},{default:s(()=>[_(" 삭제 ")]),_:1})]),_:1})]),_:1})]),_:1}),a(W),a(n($),{ref_key:"myTableRef",ref:k,modelValue:n(l),"onUpdate:modelValue":e[1]||(e[1]=o=>g(l)?l.value=o:null),headers:A,items:n(u),search:n(d),"items-per-page":n(N),page:n(T),pagination:E,"item-value":"appointNo","show-select":""},null,8,["modelValue","items","search","items-per-page","page"])]),_:1}),a(w,{modelValue:n(p),"onUpdate:modelValue":e[2]||(e[2]=o=>g(p)?p.value=o:null),location:"top",timeout:3e3,color:"warning"},{default:s(()=>[a(P,{density:"compact",type:"warning",title:"warning!",text:"선택 해주세요."})]),_:1},8,["modelValue"]),a(w,{modelValue:n(m),"onUpdate:modelValue":e[3]||(e[3]=o=>g(m)?m.value=o:null),location:"top",timeout:3e3,color:"success"},{default:s(()=>[a(P,{density:"compact",type:"success",title:"success!",text:"완료되었습니다."})]),_:1},8,["modelValue"])],64)}}});export{de as default};
