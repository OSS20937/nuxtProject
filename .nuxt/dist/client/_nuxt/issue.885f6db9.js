import{_ as I}from"./AppSelect.vue.07a85e6f.js";import{_ as $}from"./AppTextField.vue.2fc85679.js";import{_ as ne}from"./AppDateTimePicker.vue.bbb218d6.js";import{h as j,d as se,a as H,r as u,o as Q,x as G,b as h,m as W,e,w as l,j as f,f as i,s as S,i as x,B as E,p as Y,k as re,F as de,g as P}from"./entry.1dfc0890.js";import{b as B}from"./index.dd6e2a2d.js";import{a as k,b as M,V as me}from"./VCard.9d39ab92.js";import{V as ie}from"./VContainer.756d32e1.js";import{V as pe}from"./VTextarea.638ea425.js";import{V as ce}from"./VDialog.b6443236.js";import{u as fe}from"./emp.1ff55ba3.js";import{V as ve,a as Ve}from"./VTabs.917385ff.js";import{V as _e,a as Ce}from"./VWindowItem.497ecbdb.js";import{V as q}from"./VRow.f081c54f.js";import{V as m}from"./VCol.56e6ffca.js";import{V as be}from"./VDataTable.d1ba4617.js";import"./VCheckboxBtn.7df7b8f0.js";import"./forwardRefs.6ea3df5c.js";import"./VSelect.ce97ab09.js";import"./VMenu.2e511fd8.js";import"./createSimpleFunctional.4495d00f.js";import"./VAvatar.2a21003b.js";import"./VDivider.d1296279.js";/* empty css              */const z="/certificate";function Ee(v){return j.post(`${z}/deleteCertificateOne`,v)}function ye(v){return j.post(`${z}/updateCertificate`,v)}const F=se("certStore",{state:()=>({response:[]}),actions:{async REMOVE_CERT_REQUEST(v){try{const r=await Ee(v);console.log(r.data),this.response=r.data}catch(r){throw new Error(r)}},async UPDATE_CERT_REQUEST(v){try{const r=await ye(v);console.log(r.data),this.response=r.data}catch(r){throw new Error(r)}}}}),Te={class:"text-center"},ge=H({__name:"addDialog",setup(v){const r=u([]),g=u([]),p=u(""),V=u(""),_=u(""),C=u(""),w=u(""),D=u(""),y=["재직증명서","경력증명서","급여명세서"],A=[{title:"금융기관 제출용",value:"ELM001"},{title:"관공서 제출용",value:"ELM002"},{title:"회사 제출용",value:"ELM003"},{title:"기타 제출용",value:"ELM004"}];Q(()=>{b()}),G(p,()=>{L()});const b=async()=>{await B().FETCH_DEPTLIST(),r.value=Object.values(B().deptList).map(d=>({title:d.deptName,value:d.deptCode}))},L=async()=>{await E().FETCH_EMPLIST_BY_DEPT(p.value),g.value=Object.values(E().empList).map(d=>({title:d.empName,value:d.empCode}))},N=async()=>{const d={empCode:V.value,requestDate:_.value,category:C.value,usageCode:w.value,etc:D.value};console.log(d),await Y.post("http://localhost:8282/hr/certificate/insertCertificateRequest",d).then(o=>{console.log(o.data),alert("신규 신청이 등록되었습니다."),E().SET_DIALOG_BTN(!1)}).catch(o=>console.error(o))};return(d,o)=>{const T=I,c=$;return h(),W("div",Te,[e(ce,{modelValue:i(E)().isDialogBtn,"onUpdate:modelValue":o[7]||(o[7]=n=>i(E)().isDialogBtn=n),width:"300"},{default:l(()=>[e(k,null,{default:l(()=>[e(M,null,{default:l(()=>[f(" 신청 정보를 입력해주세요. ")]),_:1}),e(ie,null,{default:l(()=>[e(T,{modelValue:i(p),"onUpdate:modelValue":o[0]||(o[0]=n=>S(p)?p.value=n:null),label:"부서명",items:i(r),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"]),e(T,{modelValue:i(V),"onUpdate:modelValue":o[1]||(o[1]=n=>S(V)?V.value=n:null),label:"사원명",items:i(g),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"]),e(c,{modelValue:i(_),"onUpdate:modelValue":o[2]||(o[2]=n=>S(_)?_.value=n:null),type:"date",label:"신청일",placeholder:"신청일"},null,8,["modelValue"]),e(T,{modelValue:i(C),"onUpdate:modelValue":o[3]||(o[3]=n=>S(C)?C.value=n:null),label:"증명서구분",items:y,"append-inner-icon":"tabler-search"},null,8,["modelValue"]),e(T,{modelValue:i(w),"onUpdate:modelValue":o[4]||(o[4]=n=>S(w)?w.value=n:null),label:"용도",items:A},null,8,["modelValue"]),e(pe,{modelValue:i(D),"onUpdate:modelValue":o[5]||(o[5]=n=>S(D)?D.value=n:null),clearable:"",label:"신청사유",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(me,null,{default:l(()=>[e(x,{color:"primary",onClick:N},{default:l(()=>[f(" 신청 ")]),_:1}),e(x,{color:"primary",onClick:o[6]||(o[6]=n=>i(E)().SET_DIALOG_BTN(!1))},{default:l(()=>[f(" 닫기 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),we=P("br",null,null,-1),De=P("br",null,null,-1),Ue=P("br",null,null,-1),Le=P("br",null,null,-1),Ke=H({__name:"issue",setup(v){const r=re(),g=fe();g.loadEmpCode(),console.log("현재 로그인된 직원 코드:",g.empCode),g.empCode!=="EMP-01"&&g.empCode!=="EMP-00"&&r.push("/hr/confinement/unauthorized");const p=u("personal-info"),V=u(""),_=u(""),C=u(""),w=u([]),D=u([]),y=u(""),A=u([]),b=u(""),L=u(""),N=u(""),d=u(""),o=u(""),T=u(""),c=u(""),n=u(""),J=["재직증명서","경력증명서","급여명세서"],K=[{title:"금융기관 제출용",value:"ELM001"},{title:"관공서 제출용",value:"ELM002"},{title:"회사 제출용",value:"ELM003"},{title:"기타 제출용",value:"ELM004"}],X=[{title:"신청번호",key:"certificateNo"},{title:"신청일자",key:"requestDate"},{title:"사원명",key:"empName"},{title:"증명서구분",key:"category"},{title:"증명서용도",key:"usageName"},{title:"반려사유",key:"rejectCause"},{title:"승인상태",key:"approvalStatus"}],Z=()=>{E().SET_DIALOG_BTN(!0)};Q(()=>{ee()}),G(C,()=>{le(),y.value=""});const ee=async()=>{await B().FETCH_DEPTLIST(),w.value=Object.values(B().deptList).map(s=>({title:s.deptName,value:s.deptCode}))},le=async()=>{await E().FETCH_EMPLIST_BY_DEPT(C.value),D.value=Object.values(E().empList).map(s=>({title:s.empName,value:{empName:s.empName,empCode:s.empCode}}))},O=async()=>{if(y.value===""||V.value===""||_.value===""){alert("모든 항목을 선택해주세요.");return}console.log(y.value.empCode),await Y.get("http://localhost:8282/hr/certificate/selectCertificateList",{params:{empCode:y.value.empCode,startDate:V.value,endDate:_.value}}).then(s=>{console.log(s.data),A.value=s.data.certificateList}).catch(s=>console.error(s))},te=async(s,t)=>{try{console.log("[clickRow]",t),b.value=t.item.certificateNo,L.value=t.item.category,N.value=t.item.requestDate,d.value=t.item.empCode,o.value=t.item.empName,T.value=t.item.deptName,c.value=t.item.usageName,n.value=t.item.etc}catch(R){console.error(R)}},ae=()=>{if(b.value===""){alert("수정할 건을 선택해주세요.");return}const s={certificateNo:b.value,usageCode:c.value,category:L.value,requestDate:N.value,etc:n.value};if(c.value==="금융기관 제출용"||c.value==="관공서 제출용"||c.value==="회사 제출용"||c.value==="기타 제출용"){alert("제출 용도를 다시 선택해주세요.");return}console.log(s),F().UPDATE_CERT_REQUEST(s),alert("수정이 완료되었습니다. "),O()},oe=()=>{if(b.value===""){alert("삭제할 건을 선택해주세요.");return}const s={certificateNo:b.value};console.log(s),F().REMOVE_CERT_REQUEST(s),alert("삭제가 완료되었습니다. "),O()};return(s,t)=>{const R=I,U=$,ue=ne;return h(),W(de,null,[e(k,null,{default:l(()=>[e(ve,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),height:"70"},{default:l(()=>[e(Ve,{value:"personal-info"},{default:l(()=>[f(" 증명서 관리 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(k,{flat:""},{default:l(()=>[e(M,null,{default:l(()=>[e(_e,{modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=a=>p.value=a),class:"disable-tab-transition"},{default:l(()=>[e(Ce,{value:"personal-info"},{default:l(()=>[e(k,{class:"mb-6"},{default:l(()=>[e(M,null,{default:l(()=>[e(q,null,{default:l(()=>[e(m,{cols:"12",sm:"2"},{default:l(()=>[e(R,{modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=a=>C.value=a),label:"부서명",items:w.value,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(m,{cols:"12",sm:"3"},{default:l(()=>[e(R,{modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=a=>y.value=a),label:"사원명",items:D.value,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(m,{cols:"12",sm:"3",mt:"4"},{default:l(()=>[e(U,{modelValue:V.value,"onUpdate:modelValue":t[3]||(t[3]=a=>V.value=a),type:"date",label:"시작일",placeholder:"시작일"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",sm:"3",mt:"4"},{default:l(()=>[e(U,{modelValue:_.value,"onUpdate:modelValue":t[4]||(t[4]=a=>_.value=a),type:"date",label:"종료일",placeholder:"종료일"},null,8,["modelValue"])]),_:1}),e(x,{class:"mt-9",onClick:O},{default:l(()=>[f(" 조회 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(k,null,{default:l(()=>[e(M,null,{default:l(()=>[f(" 증명서신청내역 "),we,De,Ue,e(i(be),{headers:X,items:A.value,"items-per-page":10,"onClick:row":te},null,8,["items"])]),_:1})]),_:1}),Le,e(k,null,{default:l(()=>[e(M,null,{default:l(()=>[f("증명서신청")]),_:1}),e(q,{class:"ma-2"},{default:l(()=>[e(m,{cols:"12",md:"4"},{default:l(()=>[e(U,{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=a=>b.value=a),label:"신청번호","read-only":""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(R,{modelValue:L.value,"onUpdate:modelValue":t[7]||(t[7]=a=>L.value=a),label:"증명서구분",items:J,"append-inner-icon":"tabler-search"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(ue,{modelValue:N.value,"onUpdate:modelValue":t[8]||(t[8]=a=>N.value=a),"append-inner-icon":"tabler-calendar",label:"신청일자"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(U,{modelValue:T.value,"onUpdate:modelValue":t[9]||(t[9]=a=>T.value=a),label:"부서","read-only":""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(U,{modelValue:d.value,"onUpdate:modelValue":t[10]||(t[10]=a=>d.value=a),label:"사원번호","read-only":""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(U,{modelValue:o.value,"onUpdate:modelValue":t[11]||(t[11]=a=>o.value=a),label:"성명","read-only":""},null,8,["modelValue"])]),_:1}),e(m,null,{default:l(()=>[e(R,{modelValue:c.value,"onUpdate:modelValue":t[12]||(t[12]=a=>c.value=a),label:"용도",items:K},null,8,["modelValue"])]),_:1}),e(m,null,{default:l(()=>[e(U,{modelValue:n.value,"onUpdate:modelValue":t[13]||(t[13]=a=>n.value=a),label:"비고"},null,8,["modelValue"])]),_:1})]),_:1}),e(q,{class:"text-right mr-2 mb-2"},{default:l(()=>[e(m,null,{default:l(()=>[e(x,{color:"primary mr-2",class:"mr-2",onClick:Z},{default:l(()=>[f(" 신규 ")]),_:1}),e(x,{class:"mr-2",color:"primary",onClick:oe},{default:l(()=>[f(" 삭제 ")]),_:1}),e(x,{color:"primary",onClick:ae},{default:l(()=>[f(" 저장 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(ge)],64)}}});export{Ke as default};
