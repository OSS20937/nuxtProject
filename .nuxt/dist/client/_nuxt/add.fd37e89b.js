import{_ as O}from"./AppTextField.vue.2fc85679.js";import{_ as G}from"./AppDateTimePicker.vue.bbb218d6.js";import{_ as J}from"./AppSelect.vue.07a85e6f.js";import{a as S}from"./index.5c05f772.js";import{u as K}from"./emp.1ff55ba3.js";import{a as Q,k as W,r as t,o as X,b as E,m as U,e,w as l,i as D,j as s,F as T,I as Z,t as g,g as ee,p as x,c as ae}from"./entry.1dfc0890.js";import{V as le}from"./VContainer.756d32e1.js";import{V as oe}from"./VRow.f081c54f.js";import{V as d}from"./VCol.56e6ffca.js";import{a as A,c as te,b as ue,V as se}from"./VCard.9d39ab92.js";import{b as re,c as de,k as ne}from"./VMenu.2e511fd8.js";import{V as me}from"./VSpacer.60bc430b.js";import{V as pe}from"./VDialog.b6443236.js";import{V as B}from"./VSnackbar.b9c88be7.js";import"./VCheckboxBtn.7df7b8f0.js";import"./forwardRefs.6ea3df5c.js";import"./VSelect.ce97ab09.js";import"./VAvatar.2a21003b.js";/* empty css              */import"./createSimpleFunctional.4495d00f.js";import"./VDivider.d1296279.js";const ce=ee("h1",{class:"mb-6"},"📋 교육 등록 및 신청",-1),Be=Q({__name:"add",setup(ie){const H=W(),c=K();c.loadEmpCode(),console.log("현재 로그인된 직원 코드:",c.empCode),c.empCode!=="EMP-0001"&&H.push("/hr/confinement/unauthorized"),t([{empCode:"EMP-01",empName:"홍길동",deptCode:"D001",deptName:"인사팀",status:"",eduHistory:"",searchYear:"2025"}]);const f=t(""),r=t(""),n=t(""),i=t(""),v=t("");t("");const V=t(""),_=t(""),C=t(""),m=t(""),y=t(""),L=t([]),p=t(!1),b=t([]),k=t(!1),M=t(""),N=t(!1),h=t(""),P=async()=>{await S().FETCH_ALL_EMP(),L.value=Object.values(S().all_emp_list).map(u=>({title:u.empName,value:u.empCode}))},$=async()=>{const u={eduCode:f.value,eduName:r.value,empCode:m.value,deptCode:V.value,deptName:_.value,eduHistory:C.value,searchYear:n.value,openDate:y.value};console.log("최종 전송 데이터:",u);try{await x.post("http://localhost:8282/hr/edu/requestEduList",u)}catch(a){console.error("교육 등록 실패:",a),alert("교육 등록에 실패했습니다. 다시 시도해주세요.")}h.value="신청되었습니다.",N.value=!0},F=async()=>{if(c.empCode!=="EMP-0001"){M.value=" ❌ 권한이 없습니다.",k.value=!0;return}const u={eduCode:f.value,eduName:r.value,empCode:m.value,deptCode:V.value,deptName:_.value,eduHistory:C.value,startDate:n.value,endDate:i.value,openDate:y.value,description:v.value};console.log("최종 전송 데이터:",u);try{await x.post("http://localhost:8282/hr/edu/registerEduList",u),f.value="",r.value="",m.value="",V.value="",_.value="",C.value="",n.value="",i.value="",y.value="",v.value="",alert("교육이 성공적으로 등록되었습니다!")}catch(a){console.error("교육 등록 실패:",a),alert("교육 등록에 실패했습니다. 다시 시도해주세요.")}},j=()=>{p.value=!0,q()},q=async()=>{try{const u=await x.post("http://localhost:8282/hr/edu/selectEduNameList");b.value=u.data,console.log("출력값 확인",b.value)}catch(u){console.error("교육명 조회 실패:",u),alert("교육명을 불러오는 데 실패했습니다.")}},I=u=>{r.value=u.eduName,p.value=!1};return X(()=>{P()}),(u,a)=>{const w=O,Y=G,R=J;return E(),U(T,null,[ce,e(A,null,{default:l(()=>[e(le,null,{default:l(()=>[e(oe,null,{default:l(()=>[e(d,{cols:"12",md:"6"},{default:l(()=>[e(w,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=o=>r.value=o),label:"교육명",placeholder:"예: 직무 향상 교육",required:"",onClick:j},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"3"},{default:l(()=>[e(Y,{modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=o=>n.value=o),label:"시작일",placeholder:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"3"},{default:l(()=>[e(Y,{modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=o=>i.value=o),label:"종료일",placeholder:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"2"},{default:l(()=>[e(R,{modelValue:m.value,"onUpdate:modelValue":a[3]||(a[3]=o=>m.value=o),label:"직원명",items:L.value,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(w,{modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=o=>v.value=o),label:"교육 설명",placeholder:"교육에 대한 간단한 설명",clearable:""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",class:"d-flex justify-end",style:{gap:"8px"}},{default:l(()=>[e(D,{color:"success",onClick:$},{default:l(()=>[s("교육과정 신청")]),_:1}),e(D,{color:"primary",onClick:F},{default:l(()=>[s("등록")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(pe,{modelValue:p.value,"onUpdate:modelValue":a[6]||(a[6]=o=>p.value=o),"max-width":"600"},{default:l(()=>[e(A,null,{default:l(()=>[e(te,null,{default:l(()=>[s("교육명 선택")]),_:1}),e(ue,null,{default:l(()=>[e(re,null,{default:l(()=>[(E(!0),U(T,null,Z(b.value,(o,z)=>(E(),ae(de,{key:z,onClick:ve=>I(o),style:{cursor:"pointer"}},{default:l(()=>[e(ne,null,{default:l(()=>[s(g(o.eduName),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),e(se,null,{default:l(()=>[e(me),e(D,{text:"",onClick:a[5]||(a[5]=o=>p.value=!1)},{default:l(()=>[s("닫기")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(B,{modelValue:k.value,"onUpdate:modelValue":a[7]||(a[7]=o=>k.value=o),timeout:"3000",color:"error",location:"top center"},{default:l(()=>[s(g(M.value),1)]),_:1},8,["modelValue"]),e(B,{modelValue:N.value,"onUpdate:modelValue":a[8]||(a[8]=o=>N.value=o),timeout:"3000",color:"success",location:"top center"},{default:l(()=>[s(g(h.value),1)]),_:1},8,["modelValue"])],64)}}});export{Be as default};
