import{_ as z}from"./AppDateTimePicker.vue.bbb218d6.js";import{_ as Q}from"./AppSelect.vue.07a85e6f.js";import{_ as oe}from"./attenModal.vue.071be6e9.js";import{a as F,r as t,o as G,x as k,b as H,m as J,e,w as l,f as o,s as v,i as K,n as X,j as P,F as Z,B as C,p as q,l as se,c as ue,g as ee,t as ne,k as de}from"./entry.1dfc0890.js";import{b as I}from"./index.dd6e2a2d.js";import{V as N}from"./VRow.f081c54f.js";import{V as p}from"./VCol.56e6ffca.js";import{V as le}from"./VContainer.756d32e1.js";import{V as re}from"./VDataTable.d1ba4617.js";import{_ as me}from"./AppTextarea.vue.5cb5c500.js";import{u as ie}from"./emp.1ff55ba3.js";import{V as ce,a as j}from"./VTabs.917385ff.js";import{a as Y,b as pe}from"./VCard.9d39ab92.js";import{V as ve,a as W}from"./VWindowItem.497ecbdb.js";import"./VCheckboxBtn.7df7b8f0.js";import"./forwardRefs.6ea3df5c.js";import"./VSelect.ce97ab09.js";import"./VMenu.2e511fd8.js";import"./createSimpleFunctional.4495d00f.js";import"./VAvatar.2a21003b.js";import"./VDivider.d1296279.js";import"./DialogCloseBtn.vue.6a53a760.js";import"./AppTextField.vue.2fc85679.js";import"./VDialog.b6443236.js";/* empty css              */import"./VTextarea.638ea425.js";const fe=F({__name:"traAndEduReqListTap",setup(M){const f=t(""),c=t(""),r=t([]),D=t([]),_=t([]),m=t(""),b=t(""),u=t(!1),g=t({}),S=t(""),h=[{title:"구분",key:"restTypeName",width:120},{title:"신청일자",key:"requestDate",width:130},{title:"시작일",key:"startDate",width:130},{title:"종료일",key:"endDate",width:130},{title:"사유",key:"cause",width:100},{title:"시작시간",key:"startTime",width:130},{title:"종료시간",key:"endTime",width:130},{title:"일수",key:"numberOfDays",width:80},{title:"승인상태",key:"applovalStatus",width:120}];G(()=>{y()}),k(f,async()=>{await E()});const y=async()=>{await I().FETCH_DEPTLIST(),r.value=Object.values(I().deptList).map(d=>({title:d.deptName,value:d.deptCode}))},E=async()=>{await C().FETCH_EMPLIST_BY_DEPT(f.value),D.value=Object.values(C().empList).map(d=>({title:d.empName,value:d.empCode}))},A=async()=>{await C().SEARCH_TRAVEL_AND_EDUCATION_LIST({empCode:c.value,startDate:m.value,endDate:b.value}),_.value=C().travelAndEducationList,console.log(C().restAttdList)},x=(d,a)=>{S.value="traEdu",u.value=!u.value,console.log("isDialogVisible.value",u.value),console.log("item",a),g.value=a.item},$=()=>{u.value=!1},L=({newRow:d})=>{console.log("newRow부모",d),console.log("수정api전달하자"),d.restTypeName===""?alert("출장/교육 유형을 선택해주세요."):q.put("http://localhost:8282/hr/attendance/updateVacation",d).then(a=>{console.log(a.data),alert("수정이 완료되었습니다. "),A(),u.value=!u.value}).catch(a=>{console.error(a),alert("다시 시도해 주세요. "),u.value=!u.value})},O=d=>{console.log("delRow부모",d),q.delete("http://localhost:8282/hr/attendance/removeRestAttd",{params:{restAttdCode:d}}).then(a=>{console.log(a.data),alert("삭제가 완료되었습니다. "),A(),u.value=!u.value}).catch(a=>{console.error(a),alert("다시 시도해 주세요. "),u.value=!u.value})};return(d,a)=>{const R=z,U=Q;return H(),J(Z,null,[e(le,{class:"mb-6"},{default:l(()=>[e(N,null,{default:l(()=>[e(p,{cols:"12",md:"2"},{default:l(()=>[e(R,{modelValue:o(m),"onUpdate:modelValue":a[0]||(a[0]=V=>v(m)?m.value=V:null),label:"시작일",placeholder:"시작일"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(R,{modelValue:o(b),"onUpdate:modelValue":a[1]||(a[1]=V=>v(b)?b.value=V:null),label:"종료일",placeholder:"종료일"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(U,{modelValue:o(f),"onUpdate:modelValue":a[2]||(a[2]=V=>v(f)?f.value=V:null),label:"부서조회",placeholder:"부서조회",items:o(r),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(U,{modelValue:o(c),"onUpdate:modelValue":a[3]||(a[3]=V=>v(c)?c.value=V:null),label:"사원조회",placeholder:"사원조회",items:o(D),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(p,{cols:"12",md:"2","offset-md":""},{default:l(()=>[e(K,{class:"mt-6 ml-5",height:"43",width:"152",onClick:A},{default:l(()=>[e(X,{start:"",icon:"tabler-search"}),P("내역조회 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(o(re),{headers:h,items:o(_),"items-per-page":10,"on-click:row":x},null,8,["items"]),e(oe,{modelValue:o(u),"onUpdate:modelValue":a[4]||(a[4]=V=>v(u)?u.value=V:null),onCloseModal:$,onUpdateData:L,onDeleteData:O,row:o(g),modalStatus:o(S)},null,8,["modelValue","row","modalStatus"])],64)}}}),_e={class:"mt-5 ml-15"},Ve=F({__name:"traAndEduReqTap",setup(M){const f=t(""),c=t(""),r=t(""),D=t(""),_=t(""),m=t(""),b=t(""),u=t(""),g=t(""),S=t(""),h=t(""),y=t(""),E=t(""),A=t([]),x=t([]),$=new Date().toISOString().substring(0,10),L=[{text:"출장",value:"ASC002"},{text:"교육",value:"ASC003"}],O=s=>({title:s.text,value:s.value});G(()=>{R()}),k(u,(s,n)=>{const T=L.find(w=>w.value===s);T&&(S.value=T.text,g.value=T.value,console.log("Selected Title:",S.value),console.log("Selected value:",g.value))}),k(c,s=>{d(s,r,D),console.log("startDate:",r.value),console.log("startTime:",D.value)}),k(_,s=>{d(s,m,b),console.log("endDate:",m.value),console.log("endTime:",b.value)});const d=(s,n,T)=>{const[w,B]=s.split(" "),[i,te,ae]=w.split("-");n.value=`${i}-${te}-${ae}`,T.value=B},a=se(()=>{if(m.value&&r.value){const n=(new Date(m.value).getTime()-new Date(r.value).getTime())/(1e3*60*60*24)+1;return m.value===r.value?.5:n}else return 0});k(h,async()=>{await U()});const R=async()=>{await I().FETCH_DEPTLIST(),A.value=Object.values(I().deptList).map(s=>({title:s.deptName,value:s.deptCode}))},U=async()=>{await C().FETCH_EMPLIST_BY_DEPT(h.value),x.value=Object.values(C().empList).map(s=>({title:s.empName,value:s.empCode}))},V=async()=>{f.value===""||y.value===""||g.value===""||D.value===""||b.value===""||E.value===""?alert("모든 항목을 선택해주세요."):C().INSERT_REQUEST_REST_ATTD({empCode:y.value,restTypeCode:g.value,restTypeName:S.value,requestDate:f.value,startDate:r.value,endDate:m.value,cause:E.value,applovalStatus:"승인대기",startTime:D.value,endTime:b.value,numberOfDays:a.value}).then(s=>{console.log("[출장/교육등록 성공]",s.data),alert("신청이 등록되었습니다. ")}).catch(s=>{console.error(s),alert("다시 시도해 주세요.")})};return(s,n)=>{const T=z,w=Q,B=me;return H(),ue(le,{class:"mb-6"},{default:l(()=>[e(N,null,{default:l(()=>[e(p,{cols:"12",md:"2"},{default:l(()=>[e(T,{modelValue:o(f),"onUpdate:modelValue":n[0]||(n[0]=i=>v(f)?f.value=i:null),label:"요청날짜",placeholder:o($)},null,8,["modelValue","placeholder"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(w,{modelValue:o(u),"onUpdate:modelValue":n[1]||(n[1]=i=>v(u)?u.value=i:null),label:"신청유형",placeholder:"신청유형",items:L,"item-props":O,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(w,{modelValue:o(h),"onUpdate:modelValue":n[2]||(n[2]=i=>v(h)?h.value=i:null),label:"부서조회",placeholder:"부서조회",items:o(A),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(w,{modelValue:o(y),"onUpdate:modelValue":n[3]||(n[3]=i=>v(y)?y.value=i:null),label:"사원조회",placeholder:"사원조회",items:o(x),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(T,{modelValue:o(c),"onUpdate:modelValue":n[4]||(n[4]=i=>v(c)?c.value=i:null),label:"시작시간",placeholder:"시작시간",config:{enableTime:!0,dateFormat:"Y-m-d Hi"}},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:l(()=>[e(T,{modelValue:o(_),"onUpdate:modelValue":n[5]||(n[5]=i=>v(_)?_.value=i:null),label:"종료시간",placeholder:"종료시간",config:{enableTime:!0,dateFormat:"Y-m-d Hi"}},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(p,null,{default:l(()=>[e(B,{modelValue:o(E),"onUpdate:modelValue":n[6]||(n[6]=i=>v(E)?E.value=i:null),label:"신청사유",placeholder:"신청사유를 작성해주세요."},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(p,{cols:"12",md:"2","offset-md":"8"},{default:l(()=>[ee("p",_e," 사용일수: "+ne(o(a)),1)]),_:1}),e(p,{cols:"12",md:"2","offset-md":""},{default:l(()=>[e(K,{class:"mt-3",width:"155",onClick:V},{default:l(()=>[e(X,{start:"",icon:"tabler-checkbox"}),P("신청 ")]),_:1})]),_:1})]),_:1})]),_:1})}}}),be=ee("h1",{class:"mb-6"},"출장 / 교육신청",-1),Ye=F({__name:"travelAndEducationRequest",setup(M){const f=de(),c=ie();c.loadEmpCode(),console.log("현재 로그인된 직원 코드:",c.empCode),c.empCode!=="EMP-01"&&c.empCode!=="EMP-00"&&f.push("/hr/confinement/unauthorized");const r=t("personal-info");return(D,_)=>(H(),J(Z,null,[be,e(Y,null,{default:l(()=>[e(ce,{modelValue:o(r),"onUpdate:modelValue":_[0]||(_[0]=m=>v(r)?r.value=m:null),height:"70"},{default:l(()=>[e(j,{value:"personal-info"},{default:l(()=>[P(" 출장/교육 신청서 작성 ")]),_:1}),e(j,{value:"account-details"},{default:l(()=>[P(" 출장/교육 신청내역 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(Y,{flat:""},{default:l(()=>[e(pe,null,{default:l(()=>[e(ve,{modelValue:o(r),"onUpdate:modelValue":_[1]||(_[1]=m=>v(r)?r.value=m:null),class:"disable-tab-transition"},{default:l(()=>[e(W,{value:"personal-info"},{default:l(()=>[e(Ve)]),_:1}),e(W,{value:"account-details"},{default:l(()=>[e(fe)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64))}});export{Ye as default};
