import{_ as G}from"./AppDateTimePicker.vue.c14a1c7a.js";import{a as J,k as M,r as d,o as W,b as Y,m as q,e as a,w as u,j as U,i as C,g as m,F as H,p}from"./entry.78a4d2b5.js";import{u as K}from"./emp.01c69dea.js";import{V as h}from"./VRow.54119276.js";import{V as n}from"./VCol.369eaaa8.js";import{a as L,c as Q,b as I}from"./VCard.74fedfca.js";import{V as X}from"./VAvatar.c7ed456b.js";import{V as r}from"./VCheckboxBtn.de217159.js";import{V as c}from"./VSelect.dc01c53d.js";import{V as Z}from"./VContainer.91fe41ee.js";import{V as _}from"./VAlert.659862cf.js";import{V as z}from"./VSnackbar.01af3bad.js";/* empty css              */import"./createSimpleFunctional.7c9d16ea.js";import"./forwardRefs.6ea3df5c.js";import"./VMenu.b24af2d4.js";import"./VDivider.0d3ed842.js";const ee=m("h1",{class:"mb-2"},"직원정보 등록",-1),le={class:"d-flex flex-column justify-center gap-4"},ae={class:"d-flex flex-wrap gap-2"},te=m("span",{class:"d-none d-sm-block"},"Upload photo",-1),oe=m("span",{class:"d-none d-sm-block"},"Reset",-1),se=m("p",{class:"text-body-1 mb-0"}," Allowed JPG, JPEG or PNG. ",-1),ue=m("br",null,null,-1),De=J({__name:"registerEmpList",setup(de){M();const N=K();N.loadEmpCode(),console.log("현재 로그인된 직원 코드:",N.empCode);const w={avatarImg:"/_nuxt/assets/images/empImages/EMP-09.jpeg"},f=d(!1),V=d(!1),i=d(""),g=d(structuredClone(w)),k=d(),b=d(null),v=o=>({title:o.text,value:o.value}),j=[{value:"male",text:"남성"},{value:"female",text:"여성"}],P=[{value:"사장",text:"사장"},{value:"이사",text:"이사"},{value:"부장",text:"부장"},{value:"차장",text:"차장"},{value:"과장",text:"과장"},{value:"대리",text:"대리"},{value:"사원",text:"사원"},{value:"인턴",text:"인턴"},{value:"계약직",text:"계약직"}],S=[{value:"중졸이하",text:"중졸이하"},{value:"중졸",text:"중졸"},{value:"고졸",text:"고졸"},{value:"대졸",text:"학사"},{value:"석사",text:"석사"},{value:"박사",text:"박사"}],D=d([]),x=d([]),y=d([]),t=d({empCode:"",workplaceName:"",positionName:"",phoneNumber:"",email:"",zipCode:"",basicAddress:"",detailAddress:"",levelOfEducation:"",empName:"",deptName:"",gender:"",birthDate:"",socialSecurityNumber:"",hireDate:""}),A=async()=>{try{const o=await p.get("http://localhost:8282/hr/affair/emp");D.value=o.data.empList,console.log("[empList]",D.value)}catch(o){console.error(o)}},F=async()=>{try{const o=await p.get("http://localhost:8282/hr/base/deptList");console.log("vava",o.data);const e=o.data.deptlist;x.value=e.map(s=>({title:s.deptName,value:{deptName:s.deptName,deptCode:s.deptCode}})),console.log("[deptList]",x.value)}catch(o){console.error(o)}},B=async()=>{try{const e=(await p.get("http://localhost:8282/hr/base/workplaceList")).data.workplaceList;y.value=e.map(s=>({value:s.workplaceName,text:s.workplaceName})),console.log("[workplaceList]",y.value)}catch(o){console.error(o)}},R=async()=>{if(t.value.empCode==="")V.value=!0;else try{t.value.deptName=i.value.deptName,console.log(t.value);const o=t.value,e=new FormData,s=await p.post("http://localhost:8282/hr/affair/emp",o);console.log("[res.postData]",s.data),b.value&&(e.append("file",b.value),await p.post("http://localhost:8282/hr/affairFile/photoUpdate",e)),console.log("[postData]",o),await A(),Object.keys(t.value).forEach(l=>{t.value[l]=""}),f.value=!0}catch(o){console.log("등록 오류",o),alert("직원정보 등록 중 오류가 발생했습니다.")}},T=o=>{const e=new FileReader,{files:s}=o.target;s&&s.length>0&&(b.value=s[0]),s&&s.length&&(e.readAsDataURL(s[0]),e.onload=()=>{typeof e.result=="string"&&(g.value.avatarImg=e.result)})},$=()=>{g.value.avatarImg=w.avatarImg},O=()=>{new daum.Postcode({oncomplete:o=>{let e="",s="";if(o.userSelectedType==="R"?e=o.roadAddress:e=o.jibunAddress,o.userSelectedType==="R"){o.bname!==""&&/[동|로|가]$/g.test(o.bname)&&(s+=o.bname),o.buildingName!==""&&o.apartment==="Y"&&(s+=s!==""?`, ${o.buildingName}`:o.buildingName),s!==""&&(s=` (${s})`),t.value.zipCode=o.zonecode,t.value.basicAddress=e,t.value.detailAddress=s;const l=document.getElementById("sample6Postcode");l?l.value=o.zonecode:console.error("zipcodeElement is null or not found"),document.getElementById("sample6Address").value=e,document.getElementById("sample6DetailAddress").focus()}else document.getElementById("sample6ExtraAddress").value="",t.value.zipCode=o.zonecode,t.value.basicAddress=e,t.value.detailAddress=""}}).open()};return W(()=>{A(),F(),B();const o=document.createElement("script");o.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",document.head.appendChild(o)}),(o,e)=>{const s=G;return Y(),q(H,null,[ee,a(Z,null,{default:u(()=>[a(h,null,{default:u(()=>[a(n,{md:"12"},{default:u(()=>[a(L,null,{default:u(()=>[a(Q,{class:"d-flex justify-space-between"},{default:u(()=>[U(" 직원기초정보 "),a(C,{color:"primary",onClick:R},{default:u(()=>[U(" 등록 ")]),_:1})]),_:1}),a(I,{class:"d-flex align-center"},{default:u(()=>[a(X,{rounded:"",size:"100",class:"me-6",image:g.value.avatarImg},null,8,["image"]),m("form",le,[m("div",ae,[a(C,{variant:"outlined",onClick:e[0]||(e[0]=l=>{var E;return(E=k.value)==null?void 0:E.click()})},{default:u(()=>[te]),_:1}),m("input",{ref_key:"refInputEl",ref:k,type:"file",accept:"image/jpeg, image/jpg, image/png",hidden:"",onChange:T},null,544),a(C,{type:"reset",color:"secondary",variant:"outlined",onClick:$},{default:u(()=>[oe]),_:1})]),se])]),_:1}),a(I,{class:"d-flex"},{default:u(()=>[a(h,null,{default:u(()=>[a(n,{cols:"12",md:"3"},{default:u(()=>[a(r,{modelValue:t.value.empName,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.empName=l),label:"사원명",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(r,{modelValue:t.value.empCode,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.empCode=l),label:"사번",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(s,{modelValue:t.value.birthDate,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.birthDate=l),placeholder:"생년월일",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(r,{modelValue:t.value.socialSecurityNumber,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.socialSecurityNumber=l),label:"주민번호",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(c,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=l=>i.value=l),label:"부서",variant:"outlined",items:x.value},null,8,["modelValue","items"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(r,{modelValue:i.value.deptCode,"onUpdate:modelValue":e[6]||(e[6]=l=>i.value.deptCode=l),label:"부서번호",variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(s,{modelValue:t.value.hireDate,"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.hireDate=l),placeholder:"입사일",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"3"},{default:u(()=>[a(c,{modelValue:t.value.gender,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.gender=l),label:"성별",variant:"outlined",items:j,"item-props":v},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),ue,a(L,{title:"직원세부정보"},{default:u(()=>[a(c,{modelValue:t.value.positionName,"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.positionName=l),class:"ma-4",label:"직급",variant:"outlined",items:P,"item-props":v},null,8,["modelValue"]),a(r,{modelValue:t.value.phoneNumber,"onUpdate:modelValue":e[10]||(e[10]=l=>t.value.phoneNumber=l),class:"ma-4",label:"전화번호",variant:"outlined"},null,8,["modelValue"]),a(r,{modelValue:t.value.email,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.email=l),class:"ma-4",label:"이메일",variant:"outlined"},null,8,["modelValue"]),a(c,{modelValue:t.value.workplaceName,"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.workplaceName=l),class:"ma-4",label:"근무지",variant:"outlined",items:y.value,"item-props":v},null,8,["modelValue","items"]),a(c,{modelValue:t.value.levelOfEducation,"onUpdate:modelValue":e[13]||(e[13]=l=>t.value.levelOfEducation=l),class:"ma-4",label:"최종학력",variant:"outlined",items:S,"item-props":v},null,8,["modelValue"]),a(r,{modelValue:t.value.zipCode,"onUpdate:modelValue":e[14]||(e[14]=l=>t.value.zipCode=l),class:"ma-4",label:"우편번호",variant:"outlined",onClick:O},null,8,["modelValue"]),a(r,{modelValue:t.value.basicAddress,"onUpdate:modelValue":e[15]||(e[15]=l=>t.value.basicAddress=l),class:"ma-4",label:"주소",variant:"outlined"},null,8,["modelValue"]),a(r,{modelValue:t.value.detailAddress,"onUpdate:modelValue":e[16]||(e[16]=l=>t.value.detailAddress=l),class:"ma-4",label:"상세주소",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(z,{modelValue:V.value,"onUpdate:modelValue":e[17]||(e[17]=l=>V.value=l),location:"top",timeout:3e3,color:"warning"},{default:u(()=>[a(_,{density:"compact",type:"warning",title:"warning!",text:"빈칸이 없는지 확인해주세요."})]),_:1},8,["modelValue"]),a(z,{modelValue:f.value,"onUpdate:modelValue":e[18]||(e[18]=l=>f.value=l),location:"top",timeout:3e3,color:"success"},{default:u(()=>[a(_,{density:"compact",type:"success",title:"success!",text:"완료되었습니다."})]),_:1},8,["modelValue"])],64)}}});export{De as default};
