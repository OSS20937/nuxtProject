import{h as y,d as V,a as v,u as w,r as m,o as E,b as O,c as S,w as n,e as a,V as b,f as e,g as t,i as d,j as o,t as l}from"./entry.0077e48a.js";import{u as T}from"./index.891811da.js";import{V as P}from"./VRow.0e8f53a6.js";import{V as p}from"./VCol.5e9647f4.js";import{V as D}from"./VDivider.51cc7cc8.js";import{V as A,a as k}from"./VCard.1ab51dfd.js";import{V as H}from"./VContainer.accda7ef.js";/* empty css              */import"./createSimpleFunctional.0ef38bc9.js";import"./VAvatar.fa2cb2ba.js";async function M(i){return await y.get("/getEmpPhoto",{params:{empCode:i},withCredentials:!0})}async function N(i){return await y.post("/updatePhoto",i)}const B=V("empProfileStore",{state:()=>({photoURL:""}),actions:{async GET_EMP_PHOTO_URL(i){try{const r=await M(i);return this.photoURL=r.data,console.log("potoURL: ",this.photoURL),!0}catch(r){return console.log("사진경로 얻기 실패 에러: ",r),!1}},async UPDATE_EMP_PHOTO_URL(i){try{const r=await N(i);return this.photoURL=r.data,console.log("potoURL: ",this.photoURL),!0}catch(r){return console.log("사진 수정 실패: ",r),!1}}}}),F=t("h2",{class:"text-h5 font-weight-bold mb-6"},"내 정보",-1),I={class:"d-flex gap-2"},j={class:"text-lg"},G=t("strong",null,"이름:",-1),$={class:"text-lg"},q=t("strong",null,"생년월일:",-1),z={class:"text-lg"},J=t("strong",null,"성별:",-1),K={class:"text-lg"},Q=t("strong",null,"전화번호:",-1),W={class:"text-lg"},X=t("strong",null,"주소:",-1),Y={class:"text-lg"},Z=t("strong",null,"최종학력:",-1),tt={class:"text-lg"},ot=t("strong",null,"이메일:",-1),et={class:"text-lg"},st=t("strong",null,"부서:",-1),lt={class:"text-lg"},at=t("strong",null,"사번:",-1),nt={class:"text-lg"},rt=t("strong",null,"직급:",-1),ct={class:"text-lg"},it=t("strong",null,"호봉:",-1),_t={class:"text-lg"},dt=t("strong",null,"입사일:",-1),pt={class:"text-lg"},ut=t("strong",null,"인사접근권한:",-1),ht={class:"text-lg"},gt=t("strong",null,"로그인 아이디:",-1),vt=v({__name:"empProfile",setup(i){const r=w(),u=B(),s=T(),h=m("");E(async()=>{await u.GET_EMP_PHOTO_URL(r.empCode)?h.value=`http://localhost:8282${u.photoURL}`:alert("직원 사진 경로 얻기에 실패했습니다.")});const x=m(null),g=m(null),L=()=>{var c;(c=x.value)==null||c.click()},C=c=>{var U;const f=(U=c.target.files)==null?void 0:U[0];f&&(g.value=f,h.value=URL.createObjectURL(f))},R=async()=>{if(!g.value){alert("사진을 먼저 선택하세요.");return}const c=new FormData;c.append("file",g.value),c.append("empCode",r.empCode);try{await u.UPDATE_EMP_PHOTO_URL(c)&&(console.log("업로드 완료:"),alert("사진이 성공적으로 업로드되었습니다."))}catch(_){console.error("업로드 실패:",_),alert("사진 업로드 중 오류가 발생했습니다.")}};return(c,_)=>(O(),S(H,{class:"py-6"},{default:n(()=>[F,a(k,{class:"pa-6",elevation:"2"},{default:n(()=>[a(P,null,{default:n(()=>[a(p,{cols:"12",md:"4",class:"d-flex flex-column align-center"},{default:n(()=>[a(b,{src:e(h),alt:"프로필 이미지",height:"200",width:"160",class:"mb-4 elevation-2",cover:""},null,8,["src"]),t("div",I,[a(d,{color:"primary",variant:"tonal",onClick:L},{default:n(()=>[o("사진 선택")]),_:1}),a(d,{color:"primary",variant:"tonal",onClick:R},{default:n(()=>[o("사진 적용")]),_:1})]),t("input",{type:"file",ref_key:"fileInput",ref:x,accept:"image/*",class:"d-none",onChange:C},null,544)]),_:1}),a(p,{cols:"12",md:"8"},{default:n(()=>[a(P,null,{default:n(()=>[a(p,{cols:"12",sm:"6"},{default:n(()=>[t("p",j,[G,o(" "+l(e(s).empName),1)]),t("p",$,[q,o(" "+l(e(s).birthDate),1)]),t("p",z,[J,o(" "+l(e(s).gender),1)]),t("p",K,[Q,o(" "+l(e(s).phoneNumber),1)]),t("p",W,[X,o(" "+l(e(s).basicAddress)+" "+l(e(s).detailAddress),1)]),t("p",Y,[Z,o(" "+l(e(s).levelOfEducation),1)]),t("p",tt,[ot,o(" "+l(e(s).email),1)])]),_:1}),a(p,{cols:"12",sm:"6"},{default:n(()=>[t("p",et,[st,o(" "+l(e(s).deptCode),1)]),t("p",lt,[at,o(" "+l(e(s).empCode),1)]),t("p",nt,[rt,o(" "+l(e(s).positionCode),1)]),t("p",ct,[it,o(" "+l(e(s).Hobong),1)]),t("p",_t,[dt,o(" "+l(e(s).hireDate),1)]),t("p",pt,[ut,o(" "+l(e(s).AuthorityCode),1)]),t("p",ht,[gt,o(" "+l(e(s).userId),1)])]),_:1})]),_:1})]),_:1})]),_:1}),a(D,{class:"my-6"}),a(A,{class:"justify-end"},{default:n(()=>[a(d,{color:"primary",variant:"outlined",class:"mr-2"},{default:n(()=>[o("아이디 변경")]),_:1}),a(d,{color:"primary",variant:"outlined"},{default:n(()=>[o("비밀번호 변경")]),_:1})]),_:1})]),_:1})]),_:1}))}});export{vt as default};
