import{_ as q}from"./AppDateTimePicker.vue.bbb218d6.js";import{_ as R}from"./AppTextField.vue.2fc85679.js";import{c as S}from"./index.9aeefb9c.js";import{a as A,k as U,r,o as B,b as F,m as P,e,w as o,i as C,j as c,f as M,F as $,g as V,p as y}from"./entry.1dfc0890.js";import{u as I}from"./emp.1ff55ba3.js";import{V as j}from"./VContainer.756d32e1.js";import{V as k}from"./VRow.f081c54f.js";import{V as p}from"./VCol.56e6ffca.js";import{c as z,b as H,a as O}from"./VCard.9d39ab92.js";import{V as Q}from"./VDataTable.d1ba4617.js";import{V as X}from"./VSnackbar.b9c88be7.js";import"./VCheckboxBtn.7df7b8f0.js";import"./forwardRefs.6ea3df5c.js";/* empty css              */import"./createSimpleFunctional.4495d00f.js";import"./VAvatar.2a21003b.js";import"./VSelect.ce97ab09.js";import"./VMenu.2e511fd8.js";import"./VDivider.d1296279.js";const G=V("h1",{class:"mb-6"},"경조비 신청현황",-1),J=V("span",{class:"mt-5 mb-5 ml-3"},"신청일자",-1),K=V("span",{class:"mt-5 mb-5"},"~",-1),_e=A({__name:"presentCondition",setup(W){const g=U(),u=I();u.loadEmpCode(),console.log("현재 로그인된 직원 코드:",u.empCode),u.empCode!=="EMP-01"&&u.empCode!=="EMP-00"&&g.push("/hr/confinement/unauthorized");const N=[{title:"신청번호",key:"reqNum"},{title:"신청자",key:"empName"},{title:"신청일자",key:"reqDate"},{title:"경조구분",key:"conType"},{title:"관계",key:"rel"},{title:"경조(시작)일",key:"conTermStart"},{title:"경조(종료)일",key:"conTermEnd"},{title:"경조금액",key:"conAmt"},{title:"상태",key:"approvalStatus"}],d=r(""),i=r(""),n=r(""),b=r([]),_=r(""),f=S(),E=r([]),m=r([]),D=a=>{console.log("오냐"),f.DELETE_CONEXP(a)},v=r(!1),T=async()=>{try{const t=(await y.get("http://localhost:8282/hr/affair/emp")).data.empList;b.value=t.map(l=>({title:l.deptName,value:{deptName:l.deptName,deptCode:l.deptCode}}))}catch(a){console.error(a)}},x=async()=>{try{const t=(await y.get(`http://localhost:8282/hr/affair/emp?empCode=${n.value}`)).data.empList.find(l=>l.empCode===n.value);if(t){const l=t.empName;_.value=l}else _.value=""}catch(a){console.error("Error fetching employee name:",a)}},h=async()=>{console.log("신청내역 검색");const a={startDate:d.value,endDate:i.value};n.value&&n.value.trim()!==""&&(a.searchEmpCode=n.value),await f.FETCH_REQ_DETAIL(a),E.value=f.conExpenseList},w=async()=>{console.log("삭제"),console.log(m.value),console.log(m.value[0]),console.log(m.value[1]),await m.value.forEach(a=>{D(a)}),v.value=!0,await h()};return B(()=>{T(),x()}),(a,t)=>{const l=q,L=R;return F(),P($,null,[G,e(O,null,{default:o(()=>[e(j,null,{default:o(()=>[e(k,null,{default:o(()=>[J,e(p,{cols:"12",md:"2"},{default:o(()=>[e(l,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),"append-inner-icon":"tabler-calendar",placeholder:"2024-06-01"},null,8,["modelValue"])]),_:1}),K,e(p,{cols:"12",md:"2"},{default:o(()=>[e(l,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s),"append-inner-icon":"tabler-calendar",placeholder:"2024-06-30"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"2"},{default:o(()=>[e(L,{modelValue:n.value,"onUpdate:modelValue":t[2]||(t[2]=s=>n.value=s),"append-inner-icon":"tabler-search",placeholder:"사원번호"},null,8,["modelValue"])]),_:1}),e(p,{class:"ml-1",cols:"12",md:"2"},{default:o(()=>[e(C,{onClick:h},{default:o(()=>[c(" 검색 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(z,null,{default:o(()=>[c(" ✨ 경조비 신청현황 ")]),_:1}),e(H,null,{default:o(()=>[e(M(Q),{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),headers:N,items:E.value,"items-per-page":10,"item-value":"reqNum","show-select":""},null,8,["modelValue","items"])]),_:1}),e(k,{class:"text-right mr-2 mb-2"},{default:o(()=>[e(p,null,{default:o(()=>[e(C,{class:"mr-2",variant:"outlined",color:"error",onClick:w},{default:o(()=>[c(" 삭제 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(X,{modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=s=>v.value=s),location:"top",color:"error",variant:"tonal",timeout:"1500"},{default:o(()=>[c(" 삭제되었습니다. ")]),_:1},8,["modelValue"])],64)}}});export{_e as default};
