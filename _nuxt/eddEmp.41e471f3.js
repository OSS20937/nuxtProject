import{_ as se}from"./AppDateTimePicker.vue.d9519700.js";import{a as ie,u as re,r as u,o as me,b as ve,m as pe,e as l,w as t,V as ce,f as n,g as h,i as R,j as I,s,bP as fe,F as Ve}from"./entry.0077e48a.js";import{u as ge,a as be}from"./index.c72bc2db.js";import{u as Ce}from"./index.0d3bb7bc.js";import{V as M}from"./VRow.0e8f53a6.js";import{V as d}from"./VCol.5e9647f4.js";import{a as G,c as K,b as F,V as we}from"./VCard.1ab51dfd.js";import{V as m}from"./VCheckboxBtn.d2c75b1a.js";import{V as U}from"./VSelect.1a9a2110.js";import{V as ye}from"./VContainer.accda7ef.js";import{V as Ee}from"./VDialog.98a5580e.js";/* empty css              */import"./createSimpleFunctional.0ef38bc9.js";import"./VAvatar.fa2cb2ba.js";import"./forwardRefs.6ea3df5c.js";import"./VMenu.a2c145c5.js";import"./VDivider.51cc7cc8.js";const _e=h("h1",{class:"mb-2"},"사원 등록",-1),$e={class:"d-flex justify-center gap-2 mt-2"},Ge=ie({__name:"eddEmp",setup(xe){const T=ge(),z=re(),f=Ce(),N=be(),V=u(!1),O=u(),q=async()=>{await T.GET_DEPARTMENT_LIST(),console.log(T.deptList),O.value=T.deptList},j=u(),H=async()=>{await N.GET_POSITION_LIST();const o=N.errorCode,e=N.errorMsg,i=[...N.positionList];console.log(N.positionList),o===0?(console.log("직급 정보 조회 성공: errorMsg: ",e),console.log("직급 정보: ",i),j.value=i):console.log("직급 정보 조회 실패: errorMsg: ",e)},L=u(""),g=u(""),b=u(null),C=u(""),v=u(""),r=u(""),p=u(""),w=u(""),c=u(""),y=u(""),E=u(""),_=u(""),$=u(null),x=u(null),S=u(null),k=u(null),D=u(null),B=u("");g.value,b.value,C.value,v.value,r.value,p.value,w.value,c.value,y.value,E.value,_.value,$.value,x.value,S.value,k.value,D.value,L.value;const W=[{label:"남성",value:"M"},{label:"여성",value:"F"}],J=["정규직","계약직","인턴"],Q=["신입","경력"],X=[{label:"인사 일반",value:"ROLE_EMP"},{label:"인사 관리",value:"ROLE_HR"}];me(async()=>{if(!window.daum){const o=document.createElement("script");o.src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",o.async=!0,document.head.appendChild(o)}q(),H(),L.value=z.empCode});function Y(o){const e=o.target;v.value=e.value.replace(/\D/g,"").slice(0,7)}function Z(o){const e=o.target;r.value=ae(e.value)}function ee(o){const e=o.target,i=e.selectionStart??0;i>0&&e.value[i-1]==="-"&&(r.value=r.value.slice(0,i-1)+r.value.slice(i),o.preventDefault())}function le(){new window.daum.Postcode({oncomplete:function(o){p.value=o.address,c.value=o.zonecode}}).open()}function ae(o){const e=o.replace(/\D/g,"");return e.startsWith("02")?e.length<=2?e:e.length<=5?e.replace(/(\d{2})(\d+)/,"$1-$2"):e.length<=9?e.replace(/(\d{2})(\d{3,4})(\d{0,4})/,"$1-$2-$3"):e.slice(0,10).replace(/(\d{2})(\d{4})(\d{4})/,"$1-$2-$3"):e.length===10?e.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"):e.length===11?e.replace(/(\d{3})(\d{4})(\d{4})/,"$1-$2-$3"):e.length<=3?e:e.length<=7?e.replace(/(\d{3})(\d+)/,"$1-$2"):e.replace(/(\d{3})(\d{4})(\d*)/,"$1-$2-$3")}const A=u(null),P=u(null),te=()=>{var o;(o=A.value)==null||o.click()},oe=o=>{var a;const i=(a=o.target.files)==null?void 0:a[0];i&&(P.value=i,B.value=URL.createObjectURL(i))},ue=async o=>{if(!P.value)return;const e=new FormData;e.append("file",P.value),e.append("empCode",o),await f.REGISTER_EMP_PROFILE_IMAGE(e)},ne=async()=>{if(V.value=!1,!de())return;if(P.value===null){alert("사진을 선택하세요.");return}const o={empName:g.value,gender:b.value,birthDate:C.value,socialSecurityNo:v.value,phoneNumber:r.value,address:p.value,addressDetail:w.value,postalCode:c.value,educationLevel:y.value,email:E.value,hireDate:_.value,deptCode:$.value,positionCode:x.value,workContract:S.value,workExperience:k.value,authCode:D.value,createdBy:L.value};console.log("전송 데이터:",o),await f.REGISTER_EMP(o),console.log("empCode: ",f.empCode),console.log("result: ",f.isSuccess),await ue(f.empCode),f.isImageRegist?alert("직원 등록 성공"):alert("직원 등록 실패")},de=()=>{const o=[{label:"이름",value:g.value},{label:"성별",value:b.value},{label:"생년월일",value:C.value},{label:"주민등록번호 뒷자리",value:v.value},{label:"전화번호",value:r.value},{label:"주소",value:p.value},{label:"상세 주소",value:w.value},{label:"우편번호",value:c.value},{label:"최종 학력",value:y.value},{label:"이메일",value:E.value},{label:"입사일",value:_.value},{label:"소속 부서",value:$.value},{label:"직급",value:x.value},{label:"근로 계약 구분",value:S.value},{label:"경력 구분",value:k.value},{label:"인사 권한",value:D.value},{label:"등록자",value:L.value}];for(const e of o)if(e.value===""||e.value===null)return alert(`"${e.label}" 항목을 입력해 주세요.`),!1;return!0};return(o,e)=>{const i=se;return ve(),pe(Ve,null,[_e,l(ye,null,{default:t(()=>[l(M,null,{default:t(()=>[l(d,{md:"12"},{default:t(()=>[l(G,null,{default:t(()=>[l(K,{class:"d-flex justify-space-between"}),l(F,null,{default:t(()=>[l(M,null,{default:t(()=>[l(d,{cols:"12",md:"2",class:"d-flex flex-column align-center"},{default:t(()=>[l(ce,{src:n(B),alt:"프로필 이미지",height:"180",width:"140",class:"elevation-2 mb-2",cover:"",style:{"max-height":"180px","max-width":"140px"}},null,8,["src"]),h("div",$e,[l(R,{variant:"outlined",size:"small",onClick:te},{default:t(()=>[I(" 사진 선택 ")]),_:1}),h("input",{type:"file",ref_key:"fileInput",ref:A,accept:"image/*",class:"d-none",onChange:oe},null,544)])]),_:1}),l(d,{cols:"12",md:"10"},{default:t(()=>[l(M,null,{default:t(()=>[l(d,{cols:"12",md:"3"},{default:t(()=>[l(m,{label:"이름",variant:"outlined",modelValue:n(g),"onUpdate:modelValue":e[0]||(e[0]=a=>s(g)?g.value=a:null)},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(U,{label:"성별",variant:"outlined",items:W,"item-title":"label","item-value":"value",modelValue:n(b),"onUpdate:modelValue":e[1]||(e[1]=a=>s(b)?b.value=a:null)},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(i,{placeholder:"생년월일",variant:"outlined",modelValue:n(C),"onUpdate:modelValue":e[2]||(e[2]=a=>s(C)?C.value=a:null)},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(m,{modelValue:n(v),"onUpdate:modelValue":e[3]||(e[3]=a=>s(v)?v.value=a:null),label:"주민등록번호 뒷자리",variant:"outlined",maxlength:"7",rules:[a=>/^\d{7}$/.test(a)||"숫자 7자리를 입력하세요"],onInput:Y},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(m,{modelValue:n(r),"onUpdate:modelValue":e[4]||(e[4]=a=>s(r)?r.value=a:null),label:"전화번호",variant:"outlined",onInput:Z,onKeydown:fe(ee,["backspace"])},null,8,["modelValue","onKeydown"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(m,{modelValue:n(p),"onUpdate:modelValue":e[5]||(e[5]=a=>s(p)?p.value=a:null),label:"주소",readonly:"",onClick:le},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(m,{modelValue:n(w),"onUpdate:modelValue":e[6]||(e[6]=a=>s(w)?w.value=a:null),label:"상세 주소",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(m,{modelValue:n(c),"onUpdate:modelValue":e[7]||(e[7]=a=>s(c)?c.value=a:null),label:"우편번호",readonly:""},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(m,{modelValue:n(y),"onUpdate:modelValue":e[8]||(e[8]=a=>s(y)?y.value=a:null),label:"최종 학력",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(m,{modelValue:n(E),"onUpdate:modelValue":e[9]||(e[9]=a=>s(E)?E.value=a:null),label:"E-Mail",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(i,{placeholder:"입사일",variant:"outlined",modelValue:n(_),"onUpdate:modelValue":e[10]||(e[10]=a=>s(_)?_.value=a:null)},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(U,{modelValue:n($),"onUpdate:modelValue":e[11]||(e[11]=a=>s($)?$.value=a:null),items:n(O),"item-title":"deptName","item-value":"deptCode",label:"소속 부서",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(U,{modelValue:n(x),"onUpdate:modelValue":[e[12]||(e[12]=a=>s(x)?x.value=a:null),o.onPositionChange],items:n(j),"item-title":"positionName","item-value":"positionCode",label:"직급",variant:"outlined"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(U,{label:"근로 계약 구분",variant:"outlined",items:J,modelValue:n(S),"onUpdate:modelValue":e[13]||(e[13]=a=>s(S)?S.value=a:null)},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(U,{label:"경력 구분",variant:"outlined",items:Q,modelValue:n(k),"onUpdate:modelValue":e[14]||(e[14]=a=>s(k)?k.value=a:null)},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:t(()=>[l(U,{label:"인사 권한",variant:"outlined",items:X,"item-title":"label","item-value":"value",modelValue:n(D),"onUpdate:modelValue":e[15]||(e[15]=a=>s(D)?D.value=a:null)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(F,{class:"d-flex justify-end"},{default:t(()=>[l(R,{color:"primary",onClick:e[16]||(e[16]=a=>V.value=!0)},{default:t(()=>[I(" 등록 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Ee,{modelValue:n(V),"onUpdate:modelValue":e[18]||(e[18]=a=>s(V)?V.value=a:null),"max-width":"400"},{default:t(()=>[l(G,null,{default:t(()=>[l(K,{class:"text-h6"},{default:t(()=>[I("사원 등록 확인")]),_:1}),l(F,null,{default:t(()=>[I("입력하신 정보로 사원을 등록하시겠습니까?")]),_:1}),l(we,{class:"justify-end"},{default:t(()=>[l(R,{color:"primary",onClick:ne},{default:t(()=>[I("확인")]),_:1}),l(R,{text:"",onClick:e[17]||(e[17]=a=>V.value=!1)},{default:t(()=>[I("취소")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{Ge as default};
