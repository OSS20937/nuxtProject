import{u as X,a as $}from"./index.d73f7967.js";import{u as q}from"./index.58e675e8.js";import{_ as J}from"./empDetail.vue.5d97caed.js";import{a as Q,c as Z}from"./VCard.1ce8b0ac.js";import{V as ee}from"./VRow.4e9f5ddb.js";import{V as d}from"./VCol.fa6809e5.js";import{V as N}from"./VSelect.72dddcc6.js";import{V as te}from"./VCheckboxBtn.7676e3d1.js";import{V as le}from"./VSpacer.e6dde217.js";import{a as ae,r as l,o as oe,l as k,b as se,m as ne,e as t,w as s,j as T,i as I,f as ue,F as ie,v as x}from"./entry.e158bc8e.js";import{V as re}from"./VDataTable.320c8fba.js";import{V as de}from"./VContainer.3ea85318.js";import{V as me}from"./VDialog.b7ac1948.js";import"./createSimpleFunctional.916b6f3e.js";import"./VAvatar.8c980a86.js";/* empty css              */import"./forwardRefs.6ea3df5c.js";import"./VMenu.dc4f7cef.js";import"./VDivider.6873478d.js";const Ie=ae({__name:"findEmp",setup(ce){const b=X(),v=$(),p=q(),f=l(!1),_=l(null),P=(a,e)=>{_.value=e.item.empCode,f.value=!0},O=()=>{f.value=!1,_.value=null},M=async()=>{await b.GET_DEPARTMENT_LIST(),D.value=x(b.deptList).filter(a=>a.useYn==="Y").map(a=>a.deptName),L.value=b.deptList},R=async()=>{await v.GET_POSITION_LIST();const a=v.errorCode,e=v.errorMsg,o=[...v.positionList];if(a===0){console.log("직급 정보 조회 성공:",o);const K=o.filter(w=>w.useYn==="Y").map(w=>w.positionName);E.value=o,y.value=K}else console.error("직급 정보 조회 실패:",e),y.value=[]};oe(async()=>{M(),R()});const U=["부서","직급","계약","사원 번호","이름"],G=()=>{n.value==="사원 번호"||n.value==="이름"?(r.value=!0,C.value=!1):C.value=!0},Y=a=>{console.log("선택된 세부 옵션:",a);const e=x(L.value.find(S=>S.deptName===a));console.log("selectedDept",e);const o=x(E.value.find(S=>S.positionName===a));console.log("selectedPosition",o),e!==void 0?(c.value=e.deptCode,console.log("선택된 부서 코드:",c.value)):c.value="",o!==void 0&&(g.value=o.positionCode,console.log("선택된 직급 코드:",g.value)),r.value=!0,C.value=!1},n=l(""),V=l(""),h=l(""),u=l(10),m=l(0),C=l(!0);l(!1);const r=l(!0),L=l({}),c=l(""),E=l({}),g=l(""),i=l([]),D=l([]),y=l([]),z=["정규직","계약직","인턴"],B=[{title:"번호",key:"rnum"},{title:"사원코드",key:"empCode"},{title:"이름",key:"empName"},{title:"출생년도",key:"birthDate"},{title:"성별",key:"gender"},{title:"전화번호",key:"phoneNumber"},{title:"부서",key:"deptName"},{title:"직급",key:"positionName"},{title:"계약",key:"empType"},{title:"상태",key:"empStatus"}],F=k(()=>["부서","직급","계약"].includes(n.value)),W=k(()=>["사원 번호","이름","전체"].includes(n.value)),A=k(()=>{switch(n.value){case"부서":return D.value;case"직급":return y.value;case"계약":return z;default:return[]}}),H=async()=>{const a={searchCondition:n.value,deptCode:c.value,positionCode:g.value,contract:V.value,size:u.value+1,searchWord:h.value},e=l([]);console.log("검색 조건:",a),await p.GET_EMP_LIST(a),e.value=[],e.value=[...p.empList],e.value.length>u.value?(r.value=!1,i.value=e.value.slice(0,u.value),m.value=u.value):(r.value=!1,i.value=[...e.value],m.value=e.value.length),e.value.length===0&&(alert("검색 결과가 없습니다."),r.value=!0)},j=async()=>{const a={searchCondition:n.value,deptCode:c.value,positionCode:g.value,contract:V.value,size:u.value+1,searchWord:h.value,lastRowNum:m.value},e=l([]);if(console.log("검색 조건:",a),await p.GET_EMP_LIST_NEXT_SEARCH(a),e.value=[],e.value=[...p.empList],e.value.length>u.value){r.value=!1,i.value=[...i.value,...e.value.slice(0,u.value)],m.value=i.value.length;return}else if(e.value.length!==0){i.value=[...i.value,...e.value],m.value=i.value.length;return}else if(e.value.length==0){r.value=!0,alert("검색 결과가 없습니다.");return}};return(a,e)=>(se(),ne(ie,null,[t(de,null,{default:s(()=>[t(Q,{class:"mt-6 pa-6 elevation-2",style:{"border-radius":"8px"}},{default:s(()=>[t(Z,{class:"text-h6 font-weight-bold mb-4"},{default:s(()=>[T(" 직원 검색 ")]),_:1}),t(ee,{class:"align-center",dense:""},{default:s(()=>[t(d,{cols:"12",md:"2"},{default:s(()=>[t(N,{modelValue:n.value,"onUpdate:modelValue":[e[0]||(e[0]=o=>n.value=o),G],items:U,label:"검색 옵션",variant:"outlined",dense:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"2"},{default:s(()=>[t(N,{modelValue:V.value,"onUpdate:modelValue":[e[1]||(e[1]=o=>V.value=o),Y],items:A.value,label:"세부 옵션",variant:"outlined",disabled:!F.value,dense:""},null,8,["modelValue","items","disabled"])]),_:1}),t(d,{cols:"12",md:"3"},{default:s(()=>[t(te,{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=o=>h.value=o),label:"검색어 입력",variant:"outlined",disabled:!W.value,dense:""},null,8,["modelValue","disabled"])]),_:1}),t(d,{cols:"12",md:"2"},{default:s(()=>[t(N,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value=o),items:[2,5,10,25,50,100],label:"검색 단위",variant:"outlined",dense:""},null,8,["modelValue"])]),_:1}),t(le),t(d,{cols:"auto"},{default:s(()=>[t(I,{color:"primary",class:"text-white",onClick:H,disabled:C.value},{default:s(()=>[T(" 검색 ")]),_:1},8,["disabled"])]),_:1}),t(d,{cols:"auto"},{default:s(()=>[t(I,{color:"primary",class:"text-white",onClick:j,disabled:r.value},{default:s(()=>[T(" 다음 검색 ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),t(ue(re),{class:"elevation-1 mt-6",style:{background:"white","border-radius":"8px","min-height":"300px"},headers:B,items:i.value,"item-value":"empCode","onClick:row":P},null,8,["items"])]),_:1}),t(me,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=o=>f.value=o),"max-width":"600px"},{default:s(()=>[t(J,{empCode:_.value,onClose:O},null,8,["empCode"])]),_:1},8,["modelValue"])],64))}});export{Ie as default};
