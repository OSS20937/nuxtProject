import{h as T,d as P,a as j,N as q,r as u,x as F,b as H,m as O,e as s,w as n,i as g,j as L,f as $,F as M,g as z,aw as G}from"./entry.45328514.js";import{u as J}from"./emp.a7befc65.js";import{V as K}from"./VRow.2cb9c593.js";import{V as h}from"./VCol.41614dfd.js";import{V as x}from"./VCheckboxBtn.731da787.js";import{V as Q}from"./VSelect.370b9de8.js";import{V as W}from"./VDataTable.48cadc94.js";import{a as X}from"./VCard.aca4253c.js";import{V as Z}from"./VAlert.01de9f34.js";import{V as ee}from"./VSnackbar.dedb15a0.js";/* empty css              */import"./forwardRefs.6ea3df5c.js";import"./VMenu.7b9e0b3d.js";import"./createSimpleFunctional.05e807c5.js";import"./VAvatar.c7dee377.js";import"./VDivider.59e18b83.js";const k="/edu";function te(t){return console.log("payload",t),T.post(`${k}/approReqEdu`,t)}function ae(t){return console.log("payload",t),T.get(`${k}/searchEduListByStatus`,{params:t})}function oe(t){return T.delete(`${k}/removeEduList`,{params:{searchYear:t.searchYear,eduCode:t.eduCode,empCode:t.empCode,status:t.status}})}const se=P("eduStore",{state:()=>({eduList:[{deptName:"",durationOfTraining:"",empCode:"",empName:"",searchYear:"",status:""}],selEduList:[{eduCode:"",eduName:"",empCode:"",empName:"",deptCode:"",deptName:"",eduHistory:"",searchYear:"",status:""}]}),actions:{async APPRO_EDU_LIST(t){try{console.log("êµìœ¡ ìŠ¹ì¸ìš”ì²­ì¤‘");const a=await te(t);return this.eduList=a.data.eduList,console.log("response.data",a.data),a.data}catch(a){throw new Error(a)}},async SEARCH_EDU_LIST_STATUS(t){try{console.log("êµìœ¡ ê´€ë¦¬ ìŠ¹ì¸ì—¬ë¶€ ì¡°íšŒ");const a=await ae(t);return this.selEduList=a.data,console.log("response",a.data),a.data}catch(a){throw new Error(a)}},async DELETE_EDU_LIST(t){try{return console.log("êµìœ¡ ê´€ë¦¬ ë‚´ì—­ ì‚­ì œ"),await oe(t)}catch(a){throw new Error(a)}}}}),le=z("h1",{class:"mb-6"},"ðŸ“‹ êµìœ¡ ê´€ë¦¬ ë° ìŠ¹ì¸ìš”ì²­",-1),_e=j({__name:"manage",setup(t){const a=q(),f=J();f.loadEmpCode(),console.log("í˜„ìž¬ ë¡œê·¸ì¸ëœ ì§ì› ì½”ë“œ:",f.empCode),f.empCode!=="EMP-0001"&&a.push("/hr/confinement/unauthorized");const v=se();u("");const E=u(""),w=u(""),y=u(""),r=u([]),D=u(null),V=u([]),R=[{title:"êµìœ¡ì½”ë“œ",key:"eduCode",width:100},{title:"êµìœ¡ëª…",key:"eduName",width:"150px"},{title:"ì§ì›ì½”ë“œ",key:"empCode",width:120},{title:"ì§ì›ëª…",key:"empName",width:100},{title:"ë¶€ì„œì½”ë“œ",key:"deptCode",width:120},{title:"ë¶€ì„œëª…",key:"deptName",width:120},{title:"êµìœ¡ ì´ìˆ˜ ë‚´ì—­",key:"eduHistory",width:"150px"},{title:"ìŠ¹ì¸ìƒíƒœ",key:"status",width:120},{title:"ê²€ìƒ‰ë…„ë„",key:"searchYear",width:"150px"}],U=[{title:"ë¯¸ìŠ¹ì¸",value:"ì‹ ì²­ì™„ë£Œ"},{title:"ìŠ¹ì¸ìš”ì²­",value:"ìŠ¹ì¸ìš”ì²­"},{title:"ë°˜ë ¤",value:"ìŠ¹ì¸ë°˜ë ¤"},{title:"ìŠ¹ì¸ì™„ë£Œ",value:"ìŠ¹ì¸ì™„ë£Œ"}],c=u(!1),i=u("success"),m=u("success"),p=u("ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."),C=()=>{r.value=[]},_=async()=>{try{const d=y.value,e=E.value,o=w.value,l={sDate:e,eDate:o,status:d};console.log(l),await v.SEARCH_EDU_LIST_STATUS(l),V.value=Array.isArray(v.selEduList)?v.selEduList:[],console.log("ì¡°íšŒ ì„±ê³µ",V.value)}catch(d){throw new Error(d)}C()},b=async()=>{if(f.empCode!=="EMP-0001"){i.value="error",p.value="â›” ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìžì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.",m.value="error",c.value=!0;return}if(console.log("ìŠ¹ì¸ìš”ì²­ ì‹¤í–‰",r.value),r.value.some(e=>e.status==="ìŠ¹ì¸ì™„ë£Œ")){i.value="error",p.value="âœ… ì´ë¯¸ ìŠ¹ì¸ì™„ë£Œëœ í•­ëª©ìž…ë‹ˆë‹¤.",m.value="error",c.value=!0;return}for(const e of r.value){const{searchYear:o,eduCode:l}=e,S={searchYear:o,eduCode:l,status:"ìŠ¹ì¸ìš”ì²­"};await v.APPRO_EDU_LIST(S)}_(),C()},A=async()=>{console.log("ì‚­ì œì‹¤í–‰",r.value);const d=r.value.some(l=>l.status==="ìŠ¹ì¸ì™„ë£Œ"),e=r.value.some(l=>l.status==="ìŠ¹ì¸ìš”ì²­"),o=r.value.some(l=>l.status==="ë°˜ë ¤");if(d){i.value="error",p.value="âœ… ìŠ¹ì¸ì™„ë£Œëœ í•­ëª©ì€ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",m.value="error",c.value=!0;return}if(e){i.value="warning",p.value="âš ï¸ ìŠ¹ì¸ìš”ì²­ ì¤‘ì¸ í•­ëª©ì€ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",m.value="warning",c.value=!0;return}if(o){i.value="info",p.value="â„¹ï¸ ìŠ¹ì¸ë°˜ë ¤ í•­ëª©ì€ ê´€ë¦¬ìž í™•ì¸ í›„ ì‚­ì œ ê°€ëŠ¥í•©ë‹ˆë‹¤.",m.value="info",c.value=!0;return}try{for(const l of r.value){const{searchYear:S,eduCode:N,empCode:Y,status:B}=l,I={searchYear:S,eduCode:N,empCode:Y,status:B};await v.DELETE_EDU_LIST(I)}_(),await G(),C()}catch(l){console.error("ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:",l.message)}};return F(r,d=>{console.log("[ì„ íƒëœ í–‰]",d)}),(d,e)=>(H(),O(M,null,[le,s(X,{class:"pa-6"},{default:n(()=>[s(K,{class:"align-end mb-4"},{default:n(()=>[s(h,{cols:"12",sm:"3",mt:"4"},{default:n(()=>[s(x,{modelValue:E.value,"onUpdate:modelValue":e[0]||(e[0]=o=>E.value=o),type:"date",label:"ì‹œìž‘ì¼",placeholder:"ì‹œìž‘ì¼",variant:"outlined",density:"compact",class:"compact-textfield"},null,8,["modelValue"])]),_:1}),s(h,{cols:"12",sm:"3",mt:"4"},{default:n(()=>[s(x,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=o=>w.value=o),type:"date",label:"ì¢…ë£Œì¼",placeholder:"ì¢…ë£Œì¼",variant:"outlined",density:"compact",class:"compact-textfield"},null,8,["modelValue"])]),_:1}),s(h,{cols:"12",md:"2"},{default:n(()=>[s(Q,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=o=>y.value=o),label:"ìŠ¹ì¸ìƒíƒœ",items:U,variant:"outlined",density:"compact",class:"compact-textfield"},null,8,["modelValue"])]),_:1}),s(h,{cols:"12",class:"d-flex justify-end align-end"},{default:n(()=>[s(g,{class:"ma-1",color:"primary",onClick:_},{default:n(()=>[L(" ì¡°íšŒ ")]),_:1}),s(g,{class:"ma-1",color:"success",onClick:b},{default:n(()=>[L(" ìŠ¹ì¸ìš”ì²­ ")]),_:1}),s(g,{class:"ma-1",color:"error",onClick:A},{default:n(()=>[L(" ì‚­ì œ ")]),_:1})]),_:1})]),_:1}),s($(W),{ref_key:"dataTableRef",ref:D,modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=o=>r.value=o),class:"mt-8",headers:R,items:V.value,"items-per-page":10,"show-select":"","item-value":"eduCode","return-object":""},null,8,["modelValue","items"])]),_:1}),s(ee,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=o=>c.value=o),location:"top",timeout:3e3,color:i.value},{default:n(()=>[s(Z,{density:"compact",type:m.value,title:"ì•Œë¦¼",text:p.value},null,8,["type","text"])]),_:1},8,["modelValue","color"])],64))}});export{_e as default};
