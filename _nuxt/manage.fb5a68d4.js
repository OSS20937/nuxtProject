import{e as A}from"./index.ce472162.js";import{a as D,k as N,r,b as R,m as U,e as o,w as l,i as m,j as d,f as Y,F as B,g as C}from"./entry.e158bc8e.js";import{u as M}from"./emp.69aa027f.js";import{V as h}from"./VRow.4e9f5ddb.js";import{V as p}from"./VCol.fa6809e5.js";import{V as g}from"./VSelect.72dddcc6.js";import{V as P}from"./VDataTable.320c8fba.js";import{a as F}from"./VCard.1ce8b0ac.js";import{V as O}from"./VAlert.63db0a1e.js";import{V as j}from"./VSnackbar.598bc60c.js";/* empty css              */import"./VCheckboxBtn.7676e3d1.js";import"./forwardRefs.6ea3df5c.js";import"./VMenu.dc4f7cef.js";import"./createSimpleFunctional.916b6f3e.js";import"./VAvatar.8c980a86.js";import"./VDivider.6873478d.js";const H=C("h1",{class:"mb-6"},"인사고과 관리",-1),I=C("br",null,null,-1),ue=D({__name:"manage",setup(q){N();const E=M();E.loadEmpCode(),console.log("현재 로그인된 직원 코드:",E.empCode);const n=A(),b=[{title:"이름",key:"empName",width:80},{title:"부서",key:"deptName",width:80},{title:"직급",key:"positionName",width:80},{title:"교육",key:"durationOfTraining",width:80},{title:"자격증",key:"numberOfCertificate",width:100},{title:"근태",key:"numberOfRestDay",width:80},{title:"휴가",key:"remainingHoliday",width:80},{title:"결격여부",key:"disqualification",width:110},{title:"장기근속",key:"career",width:110},{title:"총 점수",key:"score",width:100},{title:"등급",key:"grade",width:80},{title:"승인상태",key:"status",width:110}],i=r(!1),v=r(""),f=r(""),s=r([]),S=[{title:"미승인",value:"미승인"},{title:"승인",value:"승인완료"},{title:"반려",value:"승인반려"}],V=r([]),y=r("success"),_=r("success"),k=r("완료되었습니다."),w=()=>{s.value=[]},c=async()=>{try{const a=v.value,e=f.value,t={searchYear:a,status:e};console.log(t),await n.SEARCH_EMP_EVAL_STATUS(t),V.value=await n.evalList,console.log(V.value)}catch(a){throw new Error(a)}},T=async()=>{console.log("승인"),console.log("one",s.value);for(const a of s.value){const{searchYear:e,empCode:t}=a,u={searchYear:e,empCode:t,status:"승인완료"};await n.EDIT_EMP_EVAL(u)}c(),w()},L=async()=>{console.log("반려"),console.log("two",s.value);for(const a of s.value){const{searchYear:e,empCode:t}=a,u={searchYear:e,empCode:t,status:"승인반려"};await n.EDIT_EMP_EVAL(u)}c(),w()},x=async()=>{console.log("삭제"),console.log("three",s.value);for(const a of s.value)if(a.status==="승인완료"||a.status==="승인반려"){y.value="error",_.value="error",k.value="승인완료 및 승인반려 상태인 인사고과 정보는 삭제할 수 없습니다.",i.value=!0,console.log("승인완료 및 승인반려 상태인 인사고과 정보는 삭제할 수 없습니다.");return}try{for(const a of s.value){const{searchYear:e,empCode:t}=a,u={searchYear:e,empCode:t};await n.DELETE_EMP_EVAL(u)}c(),i.value=!0,w()}catch(a){console.error("삭제 중 오류 발생:",a.message)}};return(a,e)=>(R(),U(B,null,[H,o(F,null,{default:l(()=>[I,o(h,null,{default:l(()=>[o(p,null,{default:l(()=>[o(g,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),class:"ml-4",label:"검색년도",items:["2020","2021","2022","2023","2024","2025"],variant:"outlined"},null,8,["modelValue"])]),_:1}),o(p,null,{default:l(()=>[o(g,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t),label:"승인상태",items:S,variant:"outlined"},null,8,["modelValue"])]),_:1}),o(p,null,{default:l(()=>[o(m,{color:"primary",onClick:c},{default:l(()=>[d(" 승인상태 조회 ")]),_:1})]),_:1})]),_:1}),o(Y(P),{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value=t),class:"mt-8",headers:b,items:V.value,"items-per-page":10,"show-select":"","item-value":"empCode","return-object":""},null,8,["modelValue","items"]),o(h,null,{default:l(()=>[o(p,null,{default:l(()=>[o(m,{class:"ma-1",color:"primary",onClick:T},{default:l(()=>[d(" 승인 ")]),_:1}),o(m,{class:"ma-1",color:"secondary",onClick:L},{default:l(()=>[d(" 반려 ")]),_:1}),o(m,{class:"ma-1",color:"error",onClick:x},{default:l(()=>[d(" 삭제 ")]),_:1})]),_:1})]),_:1})]),_:1}),o(j,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),location:"top",timeout:3e3,color:y.value},{default:l(()=>[o(O,{density:"compact",type:_.value,title:"알림",text:k.value},null,8,["type","text"])]),_:1},8,["modelValue","color"])],64))}});export{ue as default};
