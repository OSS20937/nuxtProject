import{_ as W}from"./AppDateTimePicker.vue.c14a1c7a.js";import{_ as j}from"./AppTextField.vue.bf697606.js";import{_ as z}from"./AppSelect.vue.6a73b757.js";import{c as G}from"./index.4708558d.js";import{a as O,k as Q,r as p,o as X,b as J,m as K,e as l,w as n,f as t,s as V,i as _,j as i,F as Y,g as C,p as U}from"./entry.78a4d2b5.js";import{u as Z}from"./emp.01c69dea.js";import{V as h}from"./VContainer.91fe41ee.js";import{V as y}from"./VRow.54119276.js";import{V as m}from"./VCol.369eaaa8.js";import{c as q,b as ee,a as D}from"./VCard.74fedfca.js";import{V as le}from"./VDataTable.98bf3bb2.js";import{V as A}from"./VSnackbar.01af3bad.js";import"./VCheckboxBtn.de217159.js";import"./forwardRefs.6ea3df5c.js";import"./VSelect.dc01c53d.js";import"./VMenu.b24af2d4.js";import"./createSimpleFunctional.7c9d16ea.js";import"./VAvatar.c7ed456b.js";import"./VDivider.0d3ed842.js";/* empty css              */const ae=C("h1",{class:"mb-6"},"경조비 신청",-1),oe=C("span",{class:"mt-5 mb-5 ml-3"},"신청일자",-1),te=C("span",{class:"mt-5 mb-5"},"~",-1),ne=C("br",null,null,-1),ge=O({__name:"request",setup(ue){const S=Q(),f=Z();f.loadEmpCode(),console.log("현재 로그인된 직원 코드:",f.empCode),f.empCode!=="EMP-01"&&f.empCode!=="EMP-00"&&S.push("/hr/confinement/unauthorized");const u=G(),x=p(!1),v=p(!1),E=p(!1),w=[{title:"신청번호",key:"reqNum"},{title:"신청자코드",key:"empCode"},{title:"신청일자",key:"reqDate"},{title:"경조구분",key:"conType"},{title:"대상자",key:"trgt"},{title:"경조(시작)일",key:"conTermStart"},{title:"경조(종료)일",key:"conTermEnd"},{title:"경조금액",key:"conAmt"}],L=p([]),b=p(""),N=p(""),c=p(""),P=p([]),k=p(""),H=[{title:"본인",value:"본인"},{title:"자녀",value:"자녀"},{title:"배우자",value:"배우자"},{title:"본인 및 배우자의 부모",value:"본인 및 배우자의 부모"},{title:"본인 및 배우자의 조부모·외조부모",value:"본인 및 배우자의 조부모·외조부모"},{title:"자녀와 그 자녀의 배우자",value:"자녀와 그 자녀의 배우자"},{title:"본인 및 배우자의 형제·자매",value:"본인 및 배우자의 형제·자매"}],R=[{title:"농협",value:"농협"},{title:"국민은행",value:"국민은행"},{title:"신한은행",value:"신한은행"},{title:"카카오뱅크",value:"카카오뱅크"},{title:"우체국",value:"우체국"}],e=p({reqNum:"NEW",empCode:"",empName:"",reqDate:"",conType:"",trgt:"",conTermStart:"",conTermEnd:"",conAmt:"",rel:"",conPlace:"",bank:"",accNum:"",accHolder:"",note:""}),B=async()=>{try{const a=(await U.get("http://localhost:8282/hr/affair/emp")).data.empList;P.value=a.map(s=>({title:s.deptName,value:{deptName:s.deptName,deptCode:s.deptCode}}))}catch(d){console.error(d)}},F=async()=>{try{const a=(await U.get(`http://localhost:8282/hr/affair/emp?empCode=${c.value}`)).data.empList.find(s=>s.empCode===c.value);if(a){const s=a.empName;k.value=s}else k.value=""}catch(d){console.error("Error fetching employee name:",d)}},M=async d=>{console.log("신청내역 검색",d);const a={startDate:b.value,endDate:N.value};c.value&&c.value.trim()!==""&&(a.searchEmpCode=c.value),await u.FETCH_REQ_DETAIL(a),L.value=u.conExpenseList},g=()=>{e.value.reqNum="NEW",e.value.empCode="",e.value.empName="",e.value.reqDate="",e.value.conType="",e.value.trgt="",e.value.conTermStart="",e.value.conTermEnd="",e.value.conAmt="",e.value.rel="",e.value.conPlace="",e.value.bank="",e.value.accNum="",e.value.accHolder="",e.value.note="",x.value=!1},$=async()=>{console.log("경조비 신청(신규)");const d=await u.REGI_CONEXP(e.value);console.log("rr",d),x.value?E.value=!0:v.value=!0,g()},I=(d,a)=>{console.log(u.conExpenseList),console.log(u.conExpenseList[0]),e.value.reqNum=u.conExpenseList[0].reqNum,e.value.empCode=u.conExpenseList[0].empCode,e.value.empName=u.conExpenseList[0].empName,e.value.reqDate=u.conExpenseList[0].reqDate,e.value.conType=u.conExpenseList[0].conType,e.value.trgt=u.conExpenseList[0].trgt,e.value.conTermStart=u.conExpenseList[0].conTermStart,e.value.conTermEnd=u.conExpenseList[0].conTermEnd,e.value.conAmt=u.conExpenseList[0].conAmt,e.value.rel=u.conExpenseList[0].rel,e.value.conPlace=u.conExpenseList[0].conPlace,e.value.bank=u.conExpenseList[0].bank,e.value.accNum=u.conExpenseList[0].accNum,e.value.accHolder=u.conExpenseList[0].accHolder,e.value.note=u.conExpenseList[0].note,x.value=!0};return X(()=>{B(),F()}),(d,a)=>{const s=W,r=j,T=z;return J(),K(Y,null,[ae,l(D,null,{default:n(()=>[l(h,null,{default:n(()=>[l(y,null,{default:n(()=>[oe,l(m,{cols:"12",md:"2"},{default:n(()=>[l(s,{modelValue:t(b),"onUpdate:modelValue":a[0]||(a[0]=o=>V(b)?b.value=o:null),"append-inner-icon":"tabler-calendar",placeholder:"2024-06-01"},null,8,["modelValue"])]),_:1}),te,l(m,{cols:"12",md:"2"},{default:n(()=>[l(s,{modelValue:t(N),"onUpdate:modelValue":a[1]||(a[1]=o=>V(N)?N.value=o:null),"append-inner-icon":"tabler-calendar",placeholder:"2024-06-30"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"2"},{default:n(()=>[l(r,{modelValue:t(c),"onUpdate:modelValue":a[2]||(a[2]=o=>V(c)?c.value=o:null),"append-inner-icon":"tabler-search",placeholder:"사원번호"},null,8,["modelValue"])]),_:1}),l(m,{class:"ml-1",cols:"12",md:"2"},{default:n(()=>[l(_,{onClick:M},{default:n(()=>[i(" 검색 ")]),_:1})]),_:1})]),_:1})]),_:1}),l(q,null,{default:n(()=>[i(" ✨ 경조비 신청내역 ")]),_:1}),l(ee,null,{default:n(()=>[l(t(le),{headers:w,items:t(L),"items-per-page":10,"onClick:row":I},null,8,["items"])]),_:1})]),_:1}),ne,l(D,null,{default:n(()=>[l(q,{class:"mt-3"},{default:n(()=>[i(" ✨ 경조비 신청 ")]),_:1}),l(y,{class:"ma-2"},{default:n(()=>[l(m,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).reqNum,"onUpdate:modelValue":a[3]||(a[3]=o=>t(e).reqNum=o),label:"신청번호",disabled:""},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).empCode,"onUpdate:modelValue":a[4]||(a[4]=o=>t(e).empCode=o),label:"신청자사번",placeholder:"EMP-00"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).empName,"onUpdate:modelValue":a[5]||(a[5]=o=>t(e).empName=o),label:"신청자성명",placeholder:"홍길동"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:n(()=>[l(s,{modelValue:t(e).reqDate,"onUpdate:modelValue":a[6]||(a[6]=o=>t(e).reqDate=o),"append-inner-icon":"tabler-calendar",label:"신청일자"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:n(()=>[l(T,{modelValue:t(e).conType,"onUpdate:modelValue":a[7]||(a[7]=o=>t(e).conType=o),label:"경조구분",items:["결혼","출산","사망","입양"]},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:n(()=>[l(T,{modelValue:t(e).rel,"onUpdate:modelValue":a[8]||(a[8]=o=>t(e).rel=o),label:"가족관계",placeholder:"선택",items:H},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).trgt,"onUpdate:modelValue":a[9]||(a[9]=o=>t(e).trgt=o),label:"대상자 성명"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:n(()=>[l(s,{modelValue:t(e).conTermStart,"onUpdate:modelValue":a[10]||(a[10]=o=>t(e).conTermStart=o),"append-inner-icon":"tabler-calendar",label:"경조일자(시작일)"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:n(()=>[l(s,{modelValue:t(e).conTermEnd,"onUpdate:modelValue":a[11]||(a[11]=o=>t(e).conTermEnd=o),"append-inner-icon":"tabler-calendar",label:"경조일자(종료일)"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).conAmt,"onUpdate:modelValue":a[12]||(a[12]=o=>t(e).conAmt=o),label:"신청금액"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"8"},{default:n(()=>[l(r,{modelValue:t(e).conPlace,"onUpdate:modelValue":a[13]||(a[13]=o=>t(e).conPlace=o),label:"경조장소"},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:n(()=>[l(T,{modelValue:t(e).bank,"onUpdate:modelValue":a[14]||(a[14]=o=>t(e).bank=o),label:"은행",placeholder:"선택",items:R},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).accNum,"onUpdate:modelValue":a[15]||(a[15]=o=>t(e).accNum=o),label:"계좌번호",placeholder:"'-'를 제외하고 입력해주세요."},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"4"},{default:n(()=>[l(r,{modelValue:t(e).accHolder,"onUpdate:modelValue":a[16]||(a[16]=o=>t(e).accHolder=o),label:"예금주",placeholder:"홍길동"},null,8,["modelValue"])]),_:1}),l(m,null,{default:n(()=>[l(r,{modelValue:t(e).note,"onUpdate:modelValue":a[17]||(a[17]=o=>t(e).note=o),label:"비고"},null,8,["modelValue"])]),_:1})]),_:1}),l(y,{class:"text-right mr-2 mb-2"},{default:n(()=>[l(m,null,{default:n(()=>[l(_,{class:"mr-2",variant:"outlined",color:"info",onClick:g},{default:n(()=>[i(" 신규 ")]),_:1}),l(_,{color:"primary",variant:"outlined",onClick:$},{default:n(()=>[i(" 저장 ")]),_:1})]),_:1})]),_:1})]),_:1}),l(A,{modelValue:t(v),"onUpdate:modelValue":a[18]||(a[18]=o=>V(v)?v.value=o:null),location:"top",color:"success",variant:"tonal",timeout:"1500"},{default:n(()=>[i(" 신청되었습니다. ")]),_:1},8,["modelValue"]),l(A,{modelValue:t(E),"onUpdate:modelValue":a[19]||(a[19]=o=>V(E)?E.value=o:null),location:"top",color:"blue-grey",variant:"tonal",timeout:"1500"},{default:n(()=>[i(" 수정되었습니다. ")]),_:1},8,["modelValue"])],64)}}});export{ge as default};
